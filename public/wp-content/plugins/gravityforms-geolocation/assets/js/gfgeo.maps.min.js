var GFGEO_Maps={},GFGEO_Map=function(o,e){this.id=o,this.prefix=e,this.map_element=e+"-map-"+o,this.map=!1,this.map_options={},this.locations=[],this.markers=[],this.active_info_window=!1,this.grouping_type="normal",this.info_window_type="normal",this.clusters=!1,this.bounds=!1,this.clusters_path="https://raw.githubusercontent.com/googlemaps/js-marker-clusterer/gh-pages/images/m",this.polylines=[],this.resize_map_control=!0,this.auto_zoom_level=!1};GFGEO_Map.prototype.generate_markers=function(){var o=this,e=o.locations.length;for(i=0;i<e+1;i++)if(i<e){if(void 0==o.locations[i].latitude||void 0==o.locations[i].longitude||"0.000000"==o.locations[i].latitude||"0.000000"==o.locations[i].longitude)continue;o.locations[i].marker_position=new google.maps.LatLng(o.locations[i].latitude,o.locations[i].longitude),"markers_spiderfier"!=o.grouping_type&&o.bounds.contains(o.locations[i].marker_position)&&(o.locations[i].marker_position=o.move_marker()),o.bounds.extend(o.locations[i].marker_position);var t={position:o.locations[i].marker_position,icon:o.locations[i].marker_url,map:o.map,locId:i,iwContent:o.locations[i].info_window_content};o.markers[i]=new google.maps.Marker(t),google.maps.event.addListener(o.markers[i],"click",function(){o.marker_click(this)})}else o.center_map(),o.group_markers()},GFGEO_Map.prototype.move_marker=function(){var o=360/this.locations.length,e=this.locations[i].marker_position.lat()+-25e-6*Math.cos(+o*i/180*Math.PI),t=this.locations[i].marker_position.lng()+-25e-6*Math.sin(+o*i/180*Math.PI),s=new google.maps.LatLng(e,t);return this.polylines.push(new google.maps.Polyline({path:[this.locations[i].marker_position,s],strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:2,map:this.map})),s},GFGEO_Map.prototype.center_map=function(){var o=this;1==o.locations.length?(o.auto_zoom_level?o.map.setZoom(13):o.map.setZoom(parseInt(o.map_options.zoomLevel)),o.map.panTo(o.markers[0].getPosition())):o.map.fitBounds(o.bounds)},GFGEO_Map.prototype.render_map=function(o){var e=this;jQuery("#"+e.map_element).length&&(e.locations=o.locations.length>0?o.locations:[],e.mapSettings=o.args,e.bounds=new google.maps.LatLngBounds,e.grouping_type=o.args.group_markers,"undefined"!=typeof o.args.clusters_path&&(e.clusters_path=o.args.clusters_path),e.map_options=o.map_options,e.map_options.mapTypeId=o.args.map_type,e.map_options.scrollwheel=o.args.scrollwheel,e.map_options.zoomLevel=o.args.zoom_level,e.map_options.mapTypeId=google.maps.MapTypeId[e.map_options.mapTypeId],e.map_options.center=new google.maps.LatLng("40.758895","-73.985131"),"auto"==e.map_options.zoomLevel?(e.auto_zoom_level=!0,e.map_options.zoomLevel=13):(e.auto_zoom_level=!1,e.map_options.zoomLevel=parseInt(e.map_options.zoomLevel)),e.map=new google.maps.Map(document.getElementById(e.map_element),e.map_options),google.maps.event.addListenerOnce(e.map,"idle",function(){jQuery("#"+e.prefix+"-map-loader-"+e.id).fadeOut(1e3),0!=jQuery("#"+e.prefix+"-resize-map-toggle-"+e.id).length&&(e.resize_map_control=document.getElementById(e.prefix+"-resize-map-toggle-"+e.id),e.resize_map_control.style.position="absolute",e.map.controls[google.maps.ControlPosition.TOP_RIGHT].push(e.resize_map_control),e.resize_map_control.style.display="block",jQuery("#"+e.prefix+"-resize-map-toggle-"+e.id).on("click",function(){var o=e.map.getCenter();jQuery(this).closest("."+e.prefix+"-map-wrapper").toggleClass(e.prefix+"-expanded-map"),jQuery(this).toggleClass(e.prefix+"-icon-resize-full").toggleClass(e.prefix+"-icon-resize-small"),setTimeout(function(){google.maps.event.trigger(e.map,"resize"),e.map.setCenter(o)},100)}),google.maps.event.addListener(e.map,"click",function(o){e.close_info_window()})),e.generate_markers()}))},GFGEO_Map.prototype.clear_polylines=function(){for(var o=0;o<this.polylines.length+1;o++)o<this.polylines.length?this.polylines[o].setMap(null):this.polylines=[]},GFGEO_Map.prototype.group_markers=function(){var o="grouping_type_"+this.grouping_type;"function"==typeof this[o]?this[o]():console.log("The function "+o+" not exists.")},GFGEO_Map.prototype.grouping_type_normal=function(){},GFGEO_Map.prototype.grouping_type_markers_clusterer=function(){"function"==typeof MarkerClusterer&&(0!=this.clusters&&this.clusters.clearMarkers(),this.clusters=new MarkerClusterer(this.map,this.markers,{imagePath:this.clusters_path,clusterClass:this.prefix+"-cluster cluster",maxZoom:15}))},GFGEO_Map.prototype.marker_click=function(o){this.acvtive_marker=o,"undefined"!=typeof directionsDisplay&&directionsDisplay.setMap(null);var e="marker_click_"+this.info_window_type;"function"==typeof this[e]?this[e](o):console.log("The function "+e+" not exists.")},GFGEO_Map.prototype.close_info_window=function(){this.active_info_window&&(this.active_info_window.close(),this.active_info_window=!1)},GFGEO_Map.prototype.marker_click_normal=function(o){o.iwContent&&(this.close_info_window(),this.active_info_window=new google.maps.InfoWindow({content:o.iwContent,maxWidth:300}),this.active_info_window.open(this.map,o))},jQuery(document).ready(function(o){"undefined"!=typeof gfgeoMapObjects&&jQuery.each(gfgeoMapObjects,function(o,e){GFGEO_Maps[o]=new GFGEO_Map(o,e.args.prefix),GFGEO_Maps[o].render_map(e)})});